"use strict";(self.webpackChunkquotation_app_02=self.webpackChunkquotation_app_02||[]).push([[157],{646:(e,t,n)=>{n.d(t,{A:()=>c});n(5043);var i=n(5795),r=n(1787),s=n(9577),l=n(927),a=n(579);const o=(0,l.Ay)(i.A)`
  & .MuiInputBase-input {
    background: #fff;
    text-align: right;
  }
`,c=e=>{let{label:t,value:n,onChange:i,fullWidth:l=!1,sx:c,readOnly:d}=e;return(0,a.jsx)(s.HG,{customInput:o,label:t,value:n,onValueChange:e=>{const{formattedValue:t,value:n}=e;i(n)},thousandSeparator:".",decimalSeparator:",",decimalScale:2,fixedDecimalScale:!0,fullWidth:l,sx:c,InputProps:{startAdornment:(0,a.jsx)(r.A,{position:"start",children:"\u20ac"}),readOnly:!!d||void 0}})}},4341:(e,t,n)=>{n.d(t,{A:()=>u});n(5043);var i=n(5795),r=n(3193),s=n(8356),l=n(9285),a=n(1449),o=n(6446),c=n(5865),d=n(9720),x=n(4117),h=n(579);const u=e=>{let{filters:t,filtersConfig:n,onFilterChange:u}=e;const{t:p}=(0,x.Bd)(),m=(e,t)=>{u(e,t)},A=e=>{var n;switch(e.type){case"text":return(0,h.jsx)(i.A,{fullWidth:!0,label:p(e.label),value:t[e.id]||"",onChange:t=>m(e.id,t.target.value)});case"select":return(0,h.jsxs)(r.A,{fullWidth:!0,children:[(0,h.jsx)(s.A,{children:p(e.label)}),(0,h.jsx)(l.A,{value:t[e.id]||"",onChange:t=>m(e.id,t.target.value),children:null===(n=e.options)||void 0===n?void 0:n.map((e=>(0,h.jsx)(a.A,{value:e.value,children:p(e.label)},e.value)))})]});case"range":return(0,h.jsxs)(o.A,{children:[(0,h.jsx)(c.A,{gutterBottom:!0,children:p(e.label)}),(0,h.jsx)(d.Ay,{value:t[e.id]||e.defaultValue,onChange:(t,n)=>m(e.id,n),valueLabelDisplay:"auto",min:e.min,max:e.max,step:e.step},e.id)]});default:return null}};return(0,h.jsx)(o.A,{sx:{display:"grid",gridTemplateColumns:`repeat(${n.length}, 1fr)`,gap:2,mb:2},children:n.map((e=>(0,h.jsx)(o.A,{children:A(e)},e.id)))})}},8751:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(6446),r=n(4194),s=n(8911),l=n(579);const a=function(e){let{message:t,type:n}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(i.A,{py:2,children:(0,l.jsx)(s.A,{sx:{width:"100%"},spacing:2,children:(0,l.jsx)(r.A,{severity:n,children:t})})})})}},2673:(e,t,n)=>{n.d(t,{A:()=>r});n(5043);var i=n(579);const r=e=>{let{text:t,search:n}=e;if(!t)return null;if(!n)return(0,i.jsx)(i.Fragment,{children:t});const r=t.split(new RegExp(`(${n})`,"gi"));return(0,i.jsx)("span",{children:r.map(((e,t)=>e.toLowerCase()===n.toLowerCase()?(0,i.jsx)("mark",{children:e},t):e))})}},1052:(e,t,n)=>{n.d(t,{A:()=>l});n(5043);var i=n(2735),r=n(6446),s=n(579);const l=e=>{let{value:t,onChange:n,readOnly:l}=e;return(0,s.jsx)(r.A,{"data-color-mode":"light",children:(0,s.jsx)(i.Ay,{value:t,onChange:e=>n(e||""),preview:l?"preview":"edit",hideToolbar:l,height:400,visibleDragbar:!1})})}},1786:(e,t,n)=>{n.d(t,{A:()=>h});var i=n(4535),r=n(5865),s=(n(5043),n(927)),l=n(690),a=n(579);const o=(0,i.Ay)(r.A)`
  width: 100%;
`,c=s.Ay.div`
  margin: ${e=>{let{margin:t}=e;return t||"4rem 0 0rem 0"}};
  padding: 24px 0 24px 0;
`,d=s.Ay.div`
  width: 100%;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  justify-items: flex-start;
  padding: 0 1rem;
`,x=(0,i.Ay)(r.A)`
  line-height: 2rem;
  transition: opacity 0.5s ease-in-out; /* Smooth transition effect */
  opacity: 1;

  &:not(:hover) {
    opacity: 0.7;
  }
`,h=e=>{let{title:t,description:n="",margin:i}=e;return(0,a.jsx)(c,{margin:i,children:(0,a.jsxs)(d,{children:[(0,a.jsx)(o,{variant:"h4",align:"left",children:t}),n?(0,a.jsx)(x,{variant:"body1",paragraph:!0,align:"left",children:n}):null]})})};(0,i.Ay)(r.A)`
  width: 100%;
`,(0,s.Ay)("div")`
  background: #F5F5F5;
  border-radius: .4rem;
  color: ${l.Ab.Black3};
  align-text: center;
  margin: ${e=>{let{margin:t}=e;return t||"4rem 0 0rem 0"}};
  padding: 24px 0 24px 0;
`,s.Ay.div`
width: 100%;
margin: 0 auto;
  display: flex;
  flex-direction: column;
  justify-items: flex-start;
  padding: 0 1rem;
`,(0,i.Ay)(r.A)`
  line-height: 2rem;
  margin: 0;
  transition: opacity 0.5s ease-in-out; /* Smooth transition effect */
  opacity: 1;

  &:not(:hover) {
    opacity: 0.7;
  }
`},4999:(e,t,n)=>{n.d(t,{A:()=>W});var i=n(2505),r=n(977),s=n(3608),l=n(6581),a=n(4109),o=n(3159),c=n(3395),d=n(6164),x=n(4329),h=n(8864),u=n(7260),p=n(2167),m=n(7392),A=n(5795),j=n(4605),g=n(1962),f=n(5865),y=n(6446),v=n(1020),C=n(9720),b=n(4535),w=n(5043),S=n(2735),k=n(579);const D=e=>{let{value:t,onChange:n,readOnly:i}=e;return(0,k.jsx)(y.A,{"data-color-mode":"light",children:(0,k.jsx)(S.Ay,{value:t,onChange:e=>n(e||""),preview:i?"preview":"edit",hideToolbar:i,height:400,visibleDragbar:!1})})},I=e=>{let{initialDescription:t,onSave:n}=e;const[i,r]=(0,w.useState)(!1),[s,l]=(0,w.useState)(t);return(0,k.jsxs)(y.A,{children:[(0,k.jsxs)(y.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,k.jsx)(f.A,{variant:"h6",children:"Component Description"}),(0,k.jsx)(p.A,{title:i?"Save":"Edit",children:(0,k.jsx)(m.A,{onClick:()=>i?(n(s),void r(!1)):r(!0),children:i?(0,k.jsx)(x.A,{}):(0,k.jsx)(o.A,{})})})]}),(0,k.jsx)(D,{value:s,onChange:l,readOnly:!i})]})};var R=n(4117),P=n(1748),B=n(5693);const W=w.memo((e=>{let{components:t,onComponentChange:n}=e;const{t:b}=(0,R.Bd)(),[S,D]=(0,w.useState)(""),[W,V]=(0,w.useState)("original"),[H,_]=(0,w.useState)([]),{user:J}=(0,P.A)(),[G,Y]=(0,w.useState)(null),[K,X]=(0,w.useState)(null),[Z,ee]=(0,w.useState)(null),[te,ne]=(0,w.useState)(null),[ie,re]=(0,w.useState)(0),[se,le]=(0,w.useState)(!1),[ae,oe]=(0,w.useState)(!1),[ce,de]=(0,w.useState)(null);(0,w.useEffect)((()=>{_(t.map(((e,t)=>({...e,originalIndex:t,discount:e.discount||0,quantity:e.quantity||1}))))}),[t]);const xe=e=>{const t=H.map((t=>({...t,included:e,discount:e&&se?ie:t.discount,quantity:t.quantity})));_(t),n(t)},he=(e,t)=>{const i=H.findIndex((t=>t.id===e)),r="up"===t?i-1:i+1;if(r<0||r>=H.length)return;const s=[...H],[l]=s.splice(i,1);s.splice(r,0,l);const a=s.map(((e,t)=>({...e,originalIndex:t})));_(a),n(a)},ue=((e,t)=>{let n;return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];n&&clearTimeout(n),n=setTimeout((()=>{e(...r)}),t)}})((e=>{if(re(e),se){const t=H.map((t=>({...t,discount:t.included?e:t.discount})));_(t),n(t)}}),300),pe=(Boolean(G),Boolean(Z)),me=(0,w.useMemo)((()=>[...H].filter((e=>e.name.toLowerCase().includes(S.toLowerCase()))).sort(((e,t)=>"original"===W?e.originalIndex-t.originalIndex:"asc"===W?e.name.localeCompare(t.name):t.name.localeCompare(e.name)))),[H,S,W]),Ae=(e,t)=>{const n=null!==t&&void 0!==t?t:0;return(0,B.$)(e*(1-n/100))},je=(e,t)=>{_((i=>{const r=i.map((n=>{if(n.id===e){const e=t?n.quantity+1:Math.max(1,n.quantity-1);return{...n,quantity:e}}return n}));return n(r),r}))};return(0,k.jsxs)(N,{children:[(0,k.jsxs)(E,{children:[(0,k.jsx)(p.A,{title:b("SortAlphabetically"),children:(0,k.jsx)(m.A,{onClick:()=>{V((e=>"original"===e?"asc":"asc"===e?"desc":"original"))},children:(0,k.jsx)(h.A,{})})}),(0,k.jsx)(p.A,{title:b("CheckAll"),children:(0,k.jsx)(m.A,{onClick:()=>xe(!0),children:(0,k.jsx)(l.A,{})})}),(0,k.jsx)(p.A,{title:b("UncheckAll"),children:(0,k.jsx)(m.A,{onClick:()=>xe(!1),children:(0,k.jsx)(a.A,{})})}),(0,k.jsx)(A.A,{size:"small",placeholder:b("FilterByName"),value:S,onChange:e=>D(e.target.value),sx:{flexGrow:1}}),null!==J&&void 0!==J&&J.id?(0,k.jsxs)(Q,{children:[(0,k.jsx)(p.A,{title:b("ActivateDiscountForAllComponents"),children:(0,k.jsx)(j.A,{control:(0,k.jsx)(g.A,{checked:se,onChange:e=>{const t=e.target.checked;if(le(t),t){const e=H.map((e=>({...e,discount:e.included?ie:e.discount})));_(e),n(e)}},name:"useGlobalDiscount"}),label:"",sx:{marginRight:0}})}),(0,k.jsx)(A.A,{type:"number",value:ie,onChange:e=>ue(Math.min(100,Math.max(0,parseInt(e.target.value)||0))),disabled:!se||!(null!==J&&void 0!==J&&J.id),InputProps:{inputProps:{min:0,max:100}},sx:{width:"80px"}}),(0,k.jsx)(f.A,{variant:"body1",children:"%"})]}):(0,k.jsx)(k.Fragment,{})]}),me.map((e=>{var t;return(0,k.jsxs)(O,{selected:!0===e.included,children:[(0,k.jsxs)($,{children:[(0,k.jsx)(m.A,{size:"small",onClick:()=>he(e.id,"up"),disabled:0===e.originalIndex,children:(0,k.jsx)(s.A,{fontSize:"small"})}),(0,k.jsx)(m.A,{size:"small",onClick:()=>he(e.id,"down"),disabled:e.originalIndex===H.length-1,children:(0,k.jsx)(r.A,{fontSize:"small"})})]}),(0,k.jsx)(q,{control:(0,k.jsx)(g.A,{checked:!0===e.included,onChange:t=>((e,t)=>{const i=H.map((n=>n.id===e?{...n,included:t,discount:t&&se?ie:n.discount,quantity:n.quantity}:n));_(i),n(i)})(e.id,t.target.checked)}),label:(0,k.jsxs)(F,{children:[(0,k.jsx)(p.A,{title:e.name,children:(0,k.jsx)(T,{variant:"body1",selected:!0===e.included,children:e.name})}),(0,k.jsxs)(z,{variant:"caption",selected:!0===e.included,children:[Ae(e.price,null!==(t=e.discount)&&void 0!==t?t:0)," ",b("EUR"),e.discount>0&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(L,{variant:"caption",children:["(",(0,B.$)(e.price)," ",b("EUR"),")"]}),(0,k.jsxs)(M,{variant:"caption",children:["-",e.discount,"%"]})]})]})]})}),(0,k.jsxs)(y.A,{display:"flex",alignItems:"center",children:[(0,k.jsx)(p.A,{title:"Decrease quantity",arrow:!0,children:(0,k.jsx)(m.A,{onClick:()=>je(e.id,!1),children:(0,k.jsx)(d.A,{})})}),(0,k.jsx)(p.A,{title:"Quantity",arrow:!0,children:(0,k.jsx)(f.A,{variant:"body1",children:`${e.quantity}`})}),(0,k.jsx)(p.A,{title:"Increase quantity",arrow:!0,children:(0,k.jsx)(m.A,{onClick:()=>je(e.id,!0),children:(0,k.jsx)(i.A,{})})}),(0,k.jsx)(p.A,{title:"View details",arrow:!0,children:(0,k.jsx)(m.A,{onClick:t=>((e,t)=>{Y(e.currentTarget),X(t),de(t.price),oe(!1)})(t,e),children:(0,k.jsx)(u.A,{fontSize:"small"})})}),null!==J&&void 0!==J&&J.id?(0,k.jsx)(p.A,{title:"Set discount",arrow:!0,children:(0,k.jsx)(m.A,{onClick:t=>((e,t)=>{ee(e.currentTarget),ne(t)})(t,e),children:(0,k.jsx)(c.A,{fontSize:"small",color:e.discount>0?"secondary":"action"})})}):(0,k.jsx)(k.Fragment,{})]})]},e.id)})),(0,k.jsx)(v.Ay,{open:Boolean(G),anchorEl:G,onClose:()=>{Y(null),X(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:K&&(0,k.jsxs)(y.A,{padding:2,children:[(0,k.jsx)(f.A,{variant:"h6",children:K.name}),(0,k.jsx)(I,{initialDescription:K.description||b("NoDescriptionAvailable"),onSave:e=>{const t=H.map((t=>t.id===K.id?{...t,description:e}:t));_(t),n(t)}}),(0,k.jsx)(y.A,{display:"flex",alignItems:"center",marginTop:2,children:ae?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(A.A,{type:"number",value:ce,onChange:e=>de(Number(e.target.value)),label:b("Price"),fullWidth:!0}),(0,k.jsx)(m.A,{onClick:()=>(e=>{if(null!==ce&&K){const t=H.map((t=>t.id===e?{...t,price:ce}:t));_(t),n(t),oe(!1)}})(K.id),children:(0,k.jsx)(x.A,{})})]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(f.A,{variant:"subtitle1",children:[(0,B.$)(null!==ce?ce:K.price)," ",b("EUR")]}),(0,k.jsx)(m.A,{onClick:()=>{oe(!0)},children:(0,k.jsx)(o.A,{})})]})})]})}),(0,k.jsx)(v.Ay,{open:pe,anchorEl:Z,onClose:()=>{ee(null),ne(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:te&&(0,k.jsxs)(U,{children:[(0,k.jsx)(f.A,{variant:"subtitle1",children:b("Discount")}),(0,k.jsx)(C.Ay,{value:te.discount||0,onChange:(e,t)=>{((e,t)=>{if(te){const e=H.map((e=>e.id===te.id?{...e,discount:t}:e));_(e),n(e),ne({...te,discount:t})}})(0,t),ne((e=>e?{...e,discount:t}:null))},"aria-labelledby":"discount-slider",valueLabelDisplay:"auto",step:1,marks:!0,min:0,max:100}),(0,k.jsxs)(f.A,{variant:"body2",children:[b("DiscountedPrice"),": ",Ae(te.price,te.discount)," ",b("EUR")]})]})})]})})),N=((0,b.Ay)(y.A)({padding:"16px",maxWidth:"300px"}),(0,b.Ay)(y.A)({borderRadius:"4px",padding:"16px",width:"100%"})),E=(0,b.Ay)(y.A)({display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",gap:"8px",flexWrap:"wrap"}),O=(0,b.Ay)(y.A)((e=>{let{selected:t}=e;return{display:"flex",alignItems:"center",marginBottom:"8px",width:"100%","&:last-child":{marginBottom:0},opacity:t?1:.7}})),$=(0,b.Ay)(y.A)({display:"flex",flexShrink:0,marginRight:"8px"}),q=(0,b.Ay)(j.A)({flex:1,marginRight:"8px",minWidth:0,overflow:"hidden"}),F=(0,b.Ay)(y.A)({display:"flex",flexDirection:"column",minWidth:0}),T=(0,b.Ay)(f.A)((e=>{let{selected:t}=e;return{whiteSpace:"nowrap",fontWeight:t?"bold":"normal",color:t?"#000":"#666"}})),z=(0,b.Ay)(f.A)((e=>{let{selected:t}=e;return{color:t?"#000":"#666",fontWeight:t?"bold":"normal"}})),L=(0,b.Ay)(f.A)({textDecoration:"line-through",marginLeft:"4px",color:"#999"}),M=(0,b.Ay)(f.A)({marginLeft:"4px",color:"#4caf50"}),U=(0,b.Ay)(y.A)({padding:"16px",width:"250px"}),Q=(0,b.Ay)(y.A)({display:"flex",alignItems:"center",gap:"8px",flexShrink:0})},1157:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ie});var i=n(9252),r=n(6446),s=n(8903),l=n(5865),a=n(5043),o=n(4117),c=n(4588),d=n(9650),x=n(1806),h=n(3460),u=n(8076),p=n(2420),m=n(1906),A=n(5795),j=n(4882),g=n(2167),f=n(3691),y=n(1748),v=n(2673),C=n(6225),b=n(579);const w=e=>{let{onClientChange:t}=e;const{t:n}=(0,o.Bd)(),{clients:i,getClients:s,getClientsIsLoading:c,getClientsError:w}=(0,y.A)(),[S,k]=(0,a.useState)(null),[D,I]=(0,a.useState)(1),[R,P]=(0,a.useState)("");(0,a.useEffect)((()=>{0===i.length&&s()}),[s]),(0,a.useEffect)((()=>{t(S)}),[S,t]);const B=(0,a.useMemo)((()=>i.filter((e=>e.companyName.toLowerCase().includes(R.toLowerCase())))),[i,R]),W=(0,a.useMemo)((()=>B.slice(10*(D-1),10*D)),[B,D]);return c?(0,b.jsx)(l.A,{children:n("LoadingClients")}):w?(0,b.jsxs)(l.A,{color:"error",children:[n("ErrorLoadingClients"),": ",w]}):(0,b.jsx)(r.A,{sx:{my:4,pb:2},children:S?(0,b.jsxs)(r.A,{sx:{position:"relative"},children:[(0,b.jsx)(C.A,{color:"success",sx:{position:"absolute",top:-10,left:-10,fontSize:"2rem"}}),(0,b.jsx)(d.A,{sx:{border:"1px solid",borderColor:"success.main",borderRadius:1},children:(0,b.jsx)(x.A,{size:"small","aria-label":"client details",children:(0,b.jsxs)(h.A,{children:[(0,b.jsxs)(u.A,{children:[(0,b.jsxs)(p.A,{component:"th",scope:"row",children:[n("ClientName"),":"]}),(0,b.jsx)(p.A,{children:`${S.firstName} ${S.lastName}`})]}),(0,b.jsxs)(u.A,{children:[(0,b.jsxs)(p.A,{component:"th",scope:"row",children:[n("CompanyName"),":"]}),(0,b.jsx)(p.A,{children:(0,b.jsx)("strong",{children:S.companyName})})]}),(0,b.jsxs)(u.A,{children:[(0,b.jsxs)(p.A,{component:"th",scope:"row",children:[n("VAT"),":"]}),(0,b.jsx)(p.A,{children:S.vatNumber})]}),(0,b.jsxs)(u.A,{children:[(0,b.jsxs)(p.A,{component:"th",scope:"row",children:[n("Email"),":"]}),(0,b.jsx)(p.A,{children:S.email})]})]})})}),(0,b.jsx)(m.A,{variant:"outlined",onClick:()=>{k(null)},sx:{mt:1},children:n("DeselectClient")})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(A.A,{label:n("SearchCompany"),variant:"outlined",fullWidth:!0,value:R,onChange:e=>{P(e.target.value),I(1)},sx:{mb:1},size:"small"}),(0,b.jsx)(d.A,{children:(0,b.jsxs)(x.A,{size:"small","aria-label":"client table",children:[(0,b.jsx)(j.A,{children:(0,b.jsxs)(u.A,{children:[(0,b.jsx)(p.A,{children:n("ID")}),(0,b.jsx)(p.A,{children:n("CompanyName")}),(0,b.jsx)(p.A,{children:n("VAT")}),(0,b.jsx)(p.A,{children:n("Email")}),(0,b.jsx)(p.A,{children:n("Actions")})]})}),(0,b.jsx)(h.A,{children:W.map((e=>(0,b.jsxs)(u.A,{children:[(0,b.jsx)(p.A,{children:e.id}),(0,b.jsx)(p.A,{children:(0,b.jsx)(g.A,{title:e.companyName,arrow:!0,children:(0,b.jsx)(r.A,{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"120px"},children:(0,b.jsx)("strong",{children:(0,b.jsx)(v.A,{text:e.companyName,search:R})})})})}),(0,b.jsx)(p.A,{children:(0,b.jsx)(g.A,{title:e.vatNumber,arrow:!0,children:(0,b.jsx)(r.A,{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"120px"},children:e.vatNumber})})}),(0,b.jsx)(p.A,{children:(0,b.jsx)(g.A,{title:e.email,arrow:!0,children:(0,b.jsx)(r.A,{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"120px"},children:(0,b.jsx)(v.A,{text:e.email,search:R})})})}),(0,b.jsx)(p.A,{children:(0,b.jsx)(m.A,{variant:"contained",size:"small",onClick:()=>(e=>{k(e)})(e),children:n("Select")})})]},e.id)))})]})}),(0,b.jsx)(r.A,{sx:{display:"flex",justifyContent:"center",p:1},children:(0,b.jsx)(f.A,{size:"small",count:Math.ceil(B.length/10),page:D,onChange:(e,t)=>{I(t)}})})]})})};var S=n(4341),k=n(8751),D=n(7206),I=n(3193),R=n(1292),P=n(7972),B=n(4605),W=n(4256),N=n(1052);const E={company:"",object:"",description:""},O=e=>{let{onDetailsChange:t}=e;const{t:n}=(0,o.Bd)(),[i,r]=(0,a.useState)(E),{company:s,object:c,description:d}=i;return(0,a.useEffect)((()=>{t(i)}),[i,t]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:n("QuoteDetails")}),(0,b.jsxs)(I.A,{component:"fieldset",margin:"normal",children:[(0,b.jsx)(R.A,{component:"legend",children:n("Company")}),(0,b.jsxs)(P.A,{row:!0,name:"company",value:s,onChange:e=>r({...i,[e.target.name]:e.target.value}),children:[(0,b.jsx)(B.A,{value:"Sermixer",control:(0,b.jsx)(W.A,{}),label:"Sermixer"}),(0,b.jsx)(B.A,{value:"S2 Truck Service",control:(0,b.jsx)(W.A,{}),label:"S2 Truck Service"})]})]}),(0,b.jsx)(A.A,{label:n("Object"),variant:"outlined",fullWidth:!0,name:"object",margin:"normal",value:c,onChange:e=>r({...i,[e.target.name]:e.target.value})}),(0,b.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:n("DescriptionOffer")}),(0,b.jsx)(N.A,{value:d,onChange:e=>r({...i,description:e})})]})};var $=n(3336),q=n(1159),F=n(5693);const T=(0,a.memo)((e=>{let{products:t,onAddToQuote:n,highlightText:i}=e;const{t:s}=(0,o.Bd)(),[l,c]=(0,a.useState)(0),[A,f]=(0,a.useState)(10);return(0,b.jsxs)($.A,{elevation:0,sx:{backgroundColor:"white",borderRadius:1,boxShadow:"0px 1px 3px rgba(0,0,0,0.12)"},children:[(0,b.jsx)(d.A,{children:(0,b.jsxs)(x.A,{size:"small",children:[(0,b.jsx)(j.A,{children:(0,b.jsxs)(u.A,{children:[(0,b.jsx)(p.A,{children:s("Image")}),(0,b.jsx)(p.A,{children:s("Name")}),(0,b.jsx)(p.A,{children:s("Price")}),(0,b.jsx)(p.A,{children:s("Category")}),(0,b.jsx)(p.A,{children:s("Company")}),(0,b.jsx)(p.A,{children:s("Actions")})]})}),(0,b.jsx)(h.A,{children:t.slice(l*A,l*A+A).map((e=>(0,b.jsxs)(u.A,{children:[(0,b.jsx)(p.A,{align:"center",children:(0,b.jsx)(g.A,{title:(0,b.jsx)("img",{src:e.imgUrl,alt:e.name,style:{width:"100vw",height:"auto",objectFit:"contain",borderRadius:"4px"}}),placement:"top",componentsProps:{tooltip:{sx:{maxWidth:"none"}}},children:(0,b.jsx)("img",{src:e.imgUrl,alt:e.name,style:{width:"auto",height:"40px",borderRadius:"4px",cursor:"pointer"}})})}),(0,b.jsx)(p.A,{children:(0,b.jsx)(g.A,{title:e.name,children:(0,b.jsx)(r.A,{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"120px"},children:(0,b.jsx)("strong",{children:(0,b.jsx)(v.A,{text:e.name,search:i})})})})}),(0,b.jsx)(p.A,{children:(0,b.jsx)(g.A,{title:`${(0,F.$)(e.price)} ${s("EUR")}`,children:(0,b.jsx)(r.A,{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"80px"},children:(0,b.jsx)("strong",{children:`${(0,F.$)(e.price)} ${s("EUR")}`})})})}),(0,b.jsx)(p.A,{children:(0,b.jsx)(g.A,{title:e.category,children:(0,b.jsx)(r.A,{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"120px"},children:(0,b.jsx)(v.A,{text:e.category,search:i})})})}),(0,b.jsx)(p.A,{children:(0,b.jsx)(g.A,{title:e.company,children:(0,b.jsx)(r.A,{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"120px"},children:s(e.company)})})}),(0,b.jsx)(p.A,{children:(0,b.jsx)(m.A,{variant:"contained",size:"small",onClick:()=>n(e.id),sx:{textTransform:"none",fontWeight:500},children:s("AddToQuote")})})]},e.id)))})]})}),(0,b.jsx)(q.A,{rowsPerPageOptions:[5,10,25],component:"div",count:t.length,rowsPerPage:A,page:l,onPageChange:(e,t)=>{c(t)},onRowsPerPageChange:e=>{f(parseInt(e.target.value,10)),c(0)},sx:{borderTop:"1px solid rgba(224, 224, 224, 1)",mt:1}})]})}));var z=n(3471),L=n(7392),M=n(4535),U=n(5475),Q=n(690),V=n(646),H=n(1786),_=n(4999);const J=e=>{let{quoteHeadDetails:t,selectedClient:n,addedProducts:i,onAddedProductsChange:d,handleSubmit:x,discount:h}=e;const{t:u}=(0,o.Bd)(),{showMessage:p}=(0,c.J)(),{user:A}=(0,y.A)(),[j,f]=(0,a.useState)([]),[v,C]=(0,a.useState)("");(0,a.useEffect)((()=>{f(i.map((e=>({...e,components:e.components.map((e=>{var t;return{...e,included:null!==(t=e.included)&&void 0!==t&&t}}))}))))}),[i]),(0,a.useEffect)((()=>{const e=localStorage.getItem("summaryQuoteData");if(e){const t=JSON.parse(e);f(t.editableProducts||[]),C(t.note||"")}}),[]),(0,a.useEffect)((()=>{const e={editableProducts:j,note:v,quoteHeadDetails:t};localStorage.setItem("summaryQuoteData",JSON.stringify(e))}),[j,v,t]);const w=(e,t,n)=>{const i=j.map(((i,r)=>r===e?{...i,[t]:n}:i));f(i),d(i)};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(Q.hk,{children:[(0,b.jsx)(H.A,{title:u("Preview"),description:u("preventivePreviewDescription")}),j.length?j.map(((e,t)=>(0,b.jsx)(Y,{children:(0,b.jsxs)(s.Ay,{container:!0,spacing:4,children:[(0,b.jsx)(s.Ay,{item:!0,xs:12,md:6,children:(0,b.jsxs)(r.A,{children:[(0,b.jsxs)(K,{children:[(0,b.jsx)(Z,{to:`/product/${e.id}`,children:(0,b.jsx)(l.A,{variant:"h4",children:e.name})}),(0,b.jsx)(g.A,{title:u("Remove Product"),arrow:!0,children:(0,b.jsx)(L.A,{sx:{height:"100%",alignSelf:"baseline",color:"inherit","&:hover":{color:"red"}},onClick:()=>(e=>{const t=j.filter(((t,n)=>n!==e));f(t),d(t),p(u("productRemoved"),"info")})(t),children:(0,b.jsx)(z.A,{})})})]}),(0,b.jsx)(X,{src:e.imgUrl,alt:e.name}),(0,b.jsx)(V.A,{label:u("ProductPrice"),value:e.price,onChange:e=>w(t,"price",e),margin:"dense",fullWidth:!0}),(0,b.jsxs)(r.A,{mt:2,children:[(0,b.jsx)(l.A,{variant:"subtitle1",children:u("Description")}),(0,b.jsx)(N.A,{value:e.description||"",onChange:e=>w(t,"description",e)})]})]})}),(0,b.jsx)(s.Ay,{item:!0,xs:12,md:6,children:(0,b.jsxs)(r.A,{children:[(0,b.jsx)(l.A,{variant:"h5",mb:2,children:u("Components")}),(0,b.jsx)(_.A,{components:e.components||[],onComponentChange:e=>((e,t)=>{f((n=>{const i=n.map(((n,i)=>i===e?{...n,components:t}:n));return d(i),i}))})(t,e)})]})})]})},e.id))):(0,b.jsx)(G,{children:u("NoItemsYet")}),(0,b.jsxs)(r.A,{mb:2,children:[(0,b.jsx)(H.A,{title:u("Notes"),description:u("InternalNotesDescription")}),(0,b.jsx)(N.A,{label:u("Note"),name:"note",value:v,onChange:e=>{C(e)},readOnly:!1,minRows:5})]})]}),(0,b.jsx)(r.A,{mt:4,display:"flex",justifyContent:"center",children:(0,b.jsx)(m.A,{variant:"contained",color:"primary",onClick:()=>{if(!n){return void p("Client must be selected.","error")}if(!t.company||!t.object){return void p("Company and Object fields must be filled out.","error")}if(0===j.length){return void p("At least one product must be added.","error")}const e={quoteHeadDetails:t,selectedClient:n,addedProducts:j.map((e=>{var t;return{...e,price:parseFloat(e.price),components:null===(t=e.components)||void 0===t?void 0:t.map((e=>({...e,price:parseFloat(e.price),quantity:e.quantity})))}})),discount:h,note:v,employeeID:null===A||void 0===A?void 0:A.id};x(e)},sx:{width:"200px",height:"50px"},children:u("Submit")})})]})},G=(0,M.Ay)(r.A)({height:"200px",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",border:"1px dashed #ccc",borderRadius:"4px",color:"#666"}),Y=(0,M.Ay)(r.A)((e=>{let{theme:t}=e;return{marginBottom:t.spacing(4),borderBottom:"1px solid #eee",paddingBottom:t.spacing(4),"&:last-child":{borderBottom:"none"}}})),K=(0,M.Ay)(r.A)({display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"}),X=(0,M.Ay)("img")({maxWidth:"100%",maxHeight:"300px",objectFit:"contain",marginBottom:"16px"}),Z=(0,M.Ay)(U.N_)({color:"inherit",textDecoration:"none","&:hover":{textDecoration:"underline"}});var ee=n(2698);const te=(e,t)=>e.filter((e=>{if(t.search&&!e.name.toLowerCase().includes(t.search.toLowerCase()))return!1;if(t.category&&"all"!==t.category&&e.category!==t.category)return!1;if(t.company&&"all"!==t.company&&e.company!==t.company)return!1;if(t.priceRange){let n,i;if(Array.isArray(t.priceRange))[n,i]=t.priceRange;else{if("number"!==typeof t.priceRange)return!0;n=0,i=t.priceRange}if(e.price<n||e.price>i)return!1}return!0}));var ne=n(3505);const ie=()=>{const{t:e}=(0,o.Bd)(),{showMessage:t}=(0,c.J)(),{products:n,getProducts:d}=(0,y.A)(),{createDocument:x,loading:h}=(0,ee.u)(),[u,p]=(0,a.useState)({}),[m,A]=(0,a.useState)(null),[j,g]=(0,a.useState)([]),[f,v]=(0,a.useState)({priceRange:[0,1e5]}),[C,I]=(0,a.useState)({type:"",text:""}),[R,P]=(0,a.useState)(0),[B,W]=(0,a.useState)(1e5);(0,a.useEffect)((()=>{d()}),[d]),(0,a.useEffect)((()=>{if(n.length>0){const e=Math.max(...n.map((e=>e.price)));W(e),v((t=>({...t,priceRange:[0,e]})))}}),[n]);const N=(0,a.useMemo)((()=>{if(0===n.length)return[];return te(n,f)}),[n,f]),E=(0,a.useMemo)((()=>{const e=(0,Q.WC)(),t=e.find((e=>"priceRange"===e.id));return t&&(t.max=B,t.defaultValue=f.priceRange),e}),[B,f.priceRange]);return h?(0,b.jsx)(D.A,{}):(0,b.jsx)(ne.Rl,{children:(0,b.jsxs)(i.A,{sx:{mt:"20px",pb:"100px"},children:[C.text&&(0,b.jsx)(r.A,{mb:2,pt:2,children:(0,b.jsx)(k.A,{message:C.text,type:C.type})}),(0,b.jsxs)(s.Ay,{container:!0,spacing:3,children:[(0,b.jsx)(s.Ay,{item:!0,xs:12,md:4,children:(0,b.jsx)(O,{onDetailsChange:p})}),(0,b.jsxs)(s.Ay,{item:!0,xs:12,md:8,children:[(0,b.jsx)(l.A,{variant:"h6",children:e("ClientSelection")}),(0,b.jsx)(w,{onClientChange:A})]}),(0,b.jsxs)(s.Ay,{item:!0,xs:12,children:[(0,b.jsx)(S.A,{filters:f,filtersConfig:E,onFilterChange:(e,t)=>{v((n=>({...n,[e]:t})))}}),0===n.length?(0,b.jsx)(D.A,{}):(0,b.jsx)(T,{products:N,onAddToQuote:i=>{const r=n.find((e=>{let{id:t}=e;return t===i}));if(r){const n=[...j,{...r,components:r.components.map((e=>({...e,quantity:e.quantity||1})))}];g(n),t(e("ProductAdded"),"success")}else t(`Could not find product with id: ${i}.`,"error"),console.error(`Could not find product with id: ${i}.`)},highlightText:f.search})]}),(0,b.jsx)(s.Ay,{item:!0,xs:12,children:(0,b.jsx)(J,{quoteHeadDetails:u,selectedClient:m,addedProducts:j,onAddedProductsChange:g,handleSubmit:async n=>{window.scrollTo({top:0,behavior:"smooth"});try{const i=await x(n);I({type:"success",text:e("DocumentCreatedMessage",{hash:i.hash})}),t(e("DocumentCreatedMessage",{hash:i.hash}),"success"),localStorage.removeItem("summaryQuoteData")}catch(i){t("string"===typeof i.message?i.message:`${i}`,"error"),I({type:"error",text:"string"===typeof i.message?i.message:`${i}`})}},discount:R})})]})]})})}},5693:(e,t,n)=>{n.d(t,{$:()=>i});const i=e=>Number(e).toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g,".")}}]);
//# sourceMappingURL=157.a8057cee.chunk.js.map