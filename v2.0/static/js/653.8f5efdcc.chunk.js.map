{"version":3,"file":"static/js/653.8f5efdcc.chunk.js","mappings":"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","sources":["components/PageHeader/index.tsx","pages/product/edit-product-page.tsx"],"sourcesContent":["import { Paper, Typography, styled as muiStyled } from \"@mui/material\";\nimport React from 'react';\nimport styled from \"styled-components\";\nimport { PALETTE } from \"../../constants/index.ts\";\n\nconst PageHeader = ({ title, description = '', margin }: any) => {\n  return (\n    <FullWidthStyledContainer margin={margin}>\n      <LimitedContainer>\n        <Title variant=\"h4\" align=\"left\">\n          {title}\n        </Title>\n        {description ? (\n          <Description variant=\"body1\" paragraph align=\"left\">\n            {description}\n          </Description>\n        ) : null}\n      </LimitedContainer>\n    </FullWidthStyledContainer>\n  );\n};\n\nconst Title = muiStyled(Typography)`\n  width: 100%;\n`;\n\nconst FullWidthStyledContainer = styled.div<{margin?: string}>`\n  margin: ${({ margin }) => margin ? margin : '4rem 0 0rem 0'};\n  padding: 24px 0 24px 0;\n`;\n\nconst LimitedContainer = styled.div`\n  width: 100%;\n  margin: 0 auto;\n  display: flex;\n  flex-direction: column;\n  justify-items: flex-start;\n  padding: 0 1rem;\n`;\n\nconst Description = muiStyled(Typography)`\n  line-height: 2rem;\n  transition: opacity 0.5s ease-in-out; /* Smooth transition effect */\n  opacity: 1;\n\n  &:not(:hover) {\n    opacity: 0.7;\n  }\n`;\n\nexport default PageHeader;\n\n\nexport const PageHeaderStyle2 = ({ title, description = '', margin }: any) => {\n  return (\n    <FullWidthStyledContainerStyle2 margin={margin}>\n      <LimitedContainerStyle2>\n        <TitleStyle2 variant=\"h4\" gutterBottom align=\"left\">\n          {title}\n        </TitleStyle2>\n        {description ? (\n          <DescriptionStyle2 variant=\"body1\" paragraph align=\"left\">\n            {description}\n          </DescriptionStyle2>\n        ) : null}\n      </LimitedContainerStyle2>\n    </FullWidthStyledContainerStyle2>\n  );\n};\n\nconst TitleStyle2 = muiStyled(Typography)`\n  width: 100%;\n`;\n\nconst FullWidthStyledContainerStyle2 = styled(\"div\")<{margin?: string}>`\n  background: #F5F5F5;\n  border-radius: .4rem;\n  color: ${PALETTE.Black3};\n  align-text: center;\n  margin: ${({ margin }) => margin ? margin : '4rem 0 0rem 0'};\n  padding: 24px 0 24px 0;\n`;\n\nconst LimitedContainerStyle2 = styled.div`\nwidth: 100%;\nmargin: 0 auto;\n  display: flex;\n  flex-direction: column;\n  justify-items: flex-start;\n  padding: 0 1rem;\n`;\n\nconst DescriptionStyle2 = muiStyled(Typography)`\n  line-height: 2rem;\n  margin: 0;\n  transition: opacity 0.5s ease-in-out; /* Smooth transition effect */\n  opacity: 1;\n\n  &:not(:hover) {\n    opacity: 0.7;\n  }\n`;\n","import { Container } from \"@mui/material\";\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useParams } from \"react-router-dom\";\nimport Loading from \"../../components/Loading/index.js\";\nimport PageHeader from \"../../components/PageHeader/index\";\nimport ProductForm from \"../../components/ProductForm/index\";\nimport { useAppState } from \"../../state/stateContext\";\nimport { ProductType } from \"../../types/index\";\nimport { WhitePaperContainer } from \"../documents/styled-components/index\";\nimport { useFlashMessage } from '../../state/FlashMessageContext';\n\nconst EditProductPage: React.FC = () => {\n  const { t } = useTranslation();\n  const { productId } = useParams<{ productId: string }>();\n  const { showMessage } = useFlashMessage();\n  const { handleSaveProduct, getProductById } = useAppState(); // Import handleSaveProduct and getProductById\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | undefined>(undefined);\n  const [successMessage, setSuccessMessage] = useState<string | undefined>(undefined);\n  const [product, setProduct] = useState<ProductType | null>(null);\n\n  useEffect(() => {\n    const fetchProduct = async () => {\n      if (productId) {\n        try {\n          const response = await getProductById(parseInt(productId, 10));\n          if (response.product) {\n            setProduct(response.product);\n          }\n        } catch (err) {\n          console.error(\"EditProductPage: error fetching product\", err);\n          setError(t('ErrorFetchingProduct'));\n        } finally {\n          setLoading(false);\n        }\n      }\n    };\n    fetchProduct();\n  }, [productId, getProductById, t]);\n\n  const handleProductChange = useCallback((updatedFields: Partial<ProductType>) => {\n    setProduct((prev) => {\n      if (prev) {\n        const updatedProduct = { ...prev, ...updatedFields };\n        // Prevent unnecessary re-renders by only updating the product if there are actual changes\n        if (JSON.stringify(prev) !== JSON.stringify(updatedProduct)) {\n          return updatedProduct;\n        }\n      }\n      return prev; // Return the previous product state if nothing has changed\n    });\n  }, []);\n\n  const handleSave = async (updatedProduct: ProductType) => {\n    setLoading(true);\n    setError(undefined);\n    setSuccessMessage(undefined);\n    try {\n      const response = await handleSaveProduct(updatedProduct, true); // Pass true for isEditing\n      if (response && response.product) {\n        setProduct(response.product);\n        setSuccessMessage(t('ProductUpdatedSuccessfully'));\n        showMessage(t('ProductUpdatedSuccessfully'), 'success');\n      }\n    } catch (err) {\n      console.error(\"EditProductPage: error saving product\", err);\n      setError(t('ErrorUpdatingProduct'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return <Loading />;\n  }\n\n  if (!product) {\n    return (\n      <WhitePaperContainer>\n        <Container>{t('ProductNotFound')}</Container>\n      </WhitePaperContainer>\n    )\n  }\n\n  return (\n    <WhitePaperContainer>\n      <Container>\n        <PageHeader title={t('EditProduct')} margin={'0'} />\n        <ProductForm\n          initialProduct={product}\n          onSave={handleSave}\n          loading={loading}\n          errorMessage={error}\n          successMessage={successMessage}\n        />\n      </Container>\n    </WhitePaperContainer>\n  );\n};\n\nexport default EditProductPage;\n"],"names":["Title","muiStyled","Typography","FullWidthStyledContainer","styled","div","_ref2","margin","LimitedContainer","Description","_ref","title","description","_jsx","children","_jsxs","variant","align","paragraph","PALETTE","Black3","_ref4","EditProductPage","t","useTranslation","productId","useParams","showMessage","useFlashMessage","handleSaveProduct","getProductById","useAppState","loading","setLoading","useState","error","setError","undefined","successMessage","setSuccessMessage","product","setProduct","useEffect","async","response","parseInt","err","console","fetchProduct","useCallback","updatedFields","prev","updatedProduct","JSON","stringify","Loading","WhitePaperContainer","Container","PageHeader","ProductForm","initialProduct","onSave","errorMessage"],"sourceRoot":""}