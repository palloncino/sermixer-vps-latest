"use strict";(self.webpackChunkquotation_app_02=self.webpackChunkquotation_app_02||[]).push([[821],{1186:(e,t,a)=>{a.d(t,{A:()=>s});a(5043);var n=a(927),l=a(4117),o=a(2167),r=a(579);const i=n.Ay.span`
  padding: 0.25rem 0.5rem;
  font-size: ${e=>e.compact?"0.625rem":"0.75rem"}; // Smaller font for compact view
  font-weight: 600;
  border-radius: 9999px; /* Fully rounded */
  display: inline-flex;
  align-items: center;
  margin-bottom: 0.25rem; /* Space between labels */
  background-color: ${e=>null===e||void 0===e?void 0:e.bgColor};
  color: ${e=>e.textColor};
`,s=e=>{let{statuses:t,compact:a}=e;const{t:n}=(0,l.Bd)(),s={CLIENT_VIEWED_DOC:{bgColor:"#d1fae5",textColor:"#065f46"},YOUR_TURN:{bgColor:"#d1fae5",textColor:"#065f46"},FINALIZED:{bgColor:"#d1fae5",textColor:"#065f46"},REJECTED:{bgColor:"#fee2e2",textColor:"#b91c1c"}};Object.values(t).some((e=>e));return(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"flex flex-col",children:Object.entries(t).map((e=>{let[t,l]=e;const d=s[t],c=n(t);return a?(0,r.jsx)(o.A,{title:c,children:(0,r.jsxs)(i,{bgColor:l?null===d||void 0===d?void 0:d.bgColor:"#f3f4f6",textColor:l?null===d||void 0===d?void 0:d.textColor:"#a1a1a1",compact:a,children:[(0,r.jsx)("span",{children:l?"\u2022":"\u25cb"})," "]})},t):(0,r.jsx)(i,{style:{marginRight:".4rem"},bgColor:l?null===d||void 0===d?void 0:d.bgColor:"#f3f4f6",textColor:l?null===d||void 0===d?void 0:d.textColor:"#a1a1a1",compact:a,children:c},t)}))})})}},4341:(e,t,a)=>{a.d(t,{A:()=>x});a(5043);var n=a(5795),l=a(3193),o=a(8356),r=a(9285),i=a(1449),s=a(6446),d=a(5865),c=a(9720),h=a(4117),u=a(579);const x=e=>{let{filters:t,filtersConfig:a,onFilterChange:x}=e;const{t:p}=(0,h.Bd)(),m=(e,t)=>{x(e,t)},g=e=>{var a;switch(e.type){case"text":return(0,u.jsx)(n.A,{fullWidth:!0,label:p(e.label),value:t[e.id]||"",onChange:t=>m(e.id,t.target.value)});case"select":return(0,u.jsxs)(l.A,{fullWidth:!0,children:[(0,u.jsx)(o.A,{children:p(e.label)}),(0,u.jsx)(r.A,{value:t[e.id]||"",onChange:t=>m(e.id,t.target.value),children:null===(a=e.options)||void 0===a?void 0:a.map((e=>(0,u.jsx)(i.A,{value:e.value,children:p(e.label)},e.value)))})]});case"range":return(0,u.jsxs)(s.A,{children:[(0,u.jsx)(d.A,{gutterBottom:!0,children:p(e.label)}),(0,u.jsx)(c.Ay,{value:t[e.id]||e.defaultValue,onChange:(t,a)=>m(e.id,a),valueLabelDisplay:"auto",min:e.min,max:e.max,step:e.step},e.id)]});default:return null}};return(0,u.jsx)(s.A,{sx:{display:"grid",gridTemplateColumns:`repeat(${a.length}, 1fr)`,gap:2,mb:2},children:a.map((e=>(0,u.jsx)(s.A,{children:g(e)},e.id)))})}},2673:(e,t,a)=>{a.d(t,{A:()=>l});a(5043);var n=a(579);const l=e=>{let{text:t,search:a}=e;if(!t)return null;if(!a)return(0,n.jsx)(n.Fragment,{children:t});const l=t.split(new RegExp(`(${a})`,"gi"));return(0,n.jsx)("span",{children:l.map(((e,t)=>e.toLowerCase()===a.toLowerCase()?(0,n.jsx)("mark",{children:e},t):e))})}},1786:(e,t,a)=>{a.d(t,{A:()=>u});var n=a(4535),l=a(5865),o=(a(5043),a(927)),r=a(690),i=a(579);const s=(0,n.Ay)(l.A)`
  width: 100%;
`,d=o.Ay.div`
  margin: ${e=>{let{margin:t}=e;return t||"4rem 0 0rem 0"}};
  padding: 24px 0 24px 0;
`,c=o.Ay.div`
  width: 100%;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  justify-items: flex-start;
  padding: 0 1rem;
`,h=(0,n.Ay)(l.A)`
  line-height: 2rem;
  transition: opacity 0.5s ease-in-out; /* Smooth transition effect */
  opacity: 1;

  &:not(:hover) {
    opacity: 0.7;
  }
`,u=e=>{let{title:t,description:a="",margin:n}=e;return(0,i.jsx)(d,{margin:n,children:(0,i.jsxs)(c,{children:[(0,i.jsx)(s,{variant:"h4",align:"left",children:t}),a?(0,i.jsx)(h,{variant:"body1",paragraph:!0,align:"left",children:a}):null]})})};(0,n.Ay)(l.A)`
  width: 100%;
`,(0,o.Ay)("div")`
  background: #F5F5F5;
  border-radius: .4rem;
  color: ${r.Ab.Black3};
  align-text: center;
  margin: ${e=>{let{margin:t}=e;return t||"4rem 0 0rem 0"}};
  padding: 24px 0 24px 0;
`,o.Ay.div`
width: 100%;
margin: 0 auto;
  display: flex;
  flex-direction: column;
  justify-items: flex-start;
  padding: 0 1rem;
`,(0,n.Ay)(l.A)`
  line-height: 2rem;
  margin: 0;
  transition: opacity 0.5s ease-in-out; /* Smooth transition effect */
  opacity: 1;

  &:not(:hover) {
    opacity: 0.7;
  }
`},2971:(e,t,a)=>{a.r(t),a.d(t,{default:()=>q});var n=a(5043),l=a(9252),o=a(5865),r=a(2698),i=a(4588),s=a(4914),d=a(3471),c=a(6485),h=a(7260),u=a(6446),x=a(9650),p=a(3336),m=a(1806),g=a(4882),v=a(8076),A=a(2420),j=a(3460),f=a(2167),w=a(7392),y=a(1159),C=a(9119);function b(e,t){const a=+(0,C.a)(e),[n,l]=[+(0,C.a)(t.start),+(0,C.a)(t.end)].sort(((e,t)=>e-t));return a>=n&&a<=l}var D=a(6859);function k(e,t){return+(0,D.o)(e)===+(0,D.o)(t)}var M=a(4117),L=a(3216),S=a(927),E=a(3140),z=a(2673),P=a(1186),H=a(579);const R=(0,S.Ay)(A.A)({cursor:"pointer","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}}),$=e=>{let{documents:t,filters:a,onDeleteDocument:l}=e;const{t:r}=(0,M.Bd)(),C=(0,L.Zp)(),{showMessage:D}=(0,i.J)(),[S,$]=(0,n.useState)(0),[F,T]=(0,n.useState)(10),[_,N]=(0,n.useState)("updatedAt"),[O,V]=(0,n.useState)("desc"),q=(0,n.useMemo)((()=>t.filter((e=>{var t,n,l,o;const r=(a.search||"").toLowerCase(),i=(null===(t=e.data)||void 0===t||null===(n=t.quoteHeadDetails)||void 0===n?void 0:n.object)||e.object||"",s=(null===(l=e.data)||void 0===l||null===(o=l.selectedClient)||void 0===o?void 0:o.companyName)||e.clientCompany||"",d=!a.company||"all"===a.company||e.company===a.company,c=!a.dateRangeStart||!a.dateRangeEnd||b(new Date(e.updatedAt),{start:new Date(a.dateRangeStart),end:new Date(a.dateRangeEnd)});return(i.toLowerCase().includes(r)||s.toLowerCase().includes(r))&&d&&c})).sort(((e,t)=>{if("updatedAt"===_)return"asc"===O?new Date(e.updatedAt).getTime()-new Date(t.updatedAt).getTime():new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime();if("clientCompany"===_){var a,n,l,o;const r=(null===(a=e.data)||void 0===a||null===(n=a.quoteHeadDetails)||void 0===n?void 0:n.companyName)||"",i=(null===(l=t.data)||void 0===l||null===(o=l.quoteHeadDetails)||void 0===o?void 0:o.companyName)||"";return"asc"===O?r.localeCompare(i):i.localeCompare(r)}return 0}))),[t,a,_,O]),I=(0,n.useMemo)((()=>q.slice(S*F,S*F+F)),[q,S,F]),B=e=>{V(_===e&&"asc"===O?"desc":"asc"),N(e)},W=(0,n.useCallback)((e=>{C(`/documents/${e}`)}),[C]),J=(0,n.useCallback)((e=>{window.open(`/client-preventive/${e}`,"_blank","noopener,noreferrer")}),[]),U=(0,n.useCallback)((e=>{l(e)}),[l]),G=(0,n.useCallback)((e=>{navigator.clipboard.writeText(e).then((()=>{D(`${e} Copied to clipboard`,"info")})).catch((e=>{console.error("Failed to copy hash: ",e)}))}),[]);return 0===q.length?(0,H.jsx)(u.A,{p:3,textAlign:"center",children:(0,H.jsx)(o.A,{children:r("No documents found matching the current filters.")})}):(0,H.jsxs)(x.A,{component:p.A,sx:{backgroundColor:"#fff",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[(0,H.jsxs)(m.A,{style:{tableLayout:"fixed",width:"100%"},children:[(0,H.jsx)(g.A,{children:(0,H.jsxs)(v.A,{children:[(0,H.jsx)(A.A,{width:"5%",children:r("ID")}),(0,H.jsx)(A.A,{width:"5%",children:r("Hash")}),(0,H.jsx)(R,{width:"30%",onClick:()=>B("object"),children:r("object")}),(0,H.jsx)(R,{width:"10%",onClick:()=>B("client"),children:r("client")}),(0,H.jsx)(R,{width:"10%",onClick:()=>B("company"),children:r("company")}),(0,H.jsx)(A.A,{width:"10%",children:r("status")}),(0,H.jsx)(R,{width:"10%",onClick:()=>B("updatedAt"),children:r("updatedAt")}),(0,H.jsx)(A.A,{width:"12%",children:r("action")})]})}),(0,H.jsx)(j.A,{children:I.map((e=>{var t,n,l,o,i,x,p,m;return(0,H.jsxs)(v.A,{sx:{"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:[(0,H.jsx)(A.A,{children:e.id||e._id}),(0,H.jsx)(A.A,{children:(0,H.jsx)(f.A,{title:r("copy"),children:(0,H.jsx)(w.A,{onClick:()=>G(e.hash),size:"small",children:(0,H.jsx)(s.A,{fontSize:"small"})})})}),(0,H.jsx)(f.A,{title:r((null===(t=e.data)||void 0===t||null===(n=t.quoteHeadDetails)||void 0===n?void 0:n.object)||e.object||""),children:(0,H.jsx)(A.A,{title:(null===(l=e.data)||void 0===l||null===(o=l.quoteHeadDetails)||void 0===o?void 0:o.object)||e.object||"",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:(0,H.jsx)(z.A,{text:(null===(i=e.data)||void 0===i||null===(x=i.quoteHeadDetails)||void 0===x?void 0:x.object)||e.object||"",search:a.search||""})})}),(0,H.jsx)(A.A,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:(0,H.jsx)(z.A,{text:(null===(p=e.data)||void 0===p||null===(m=p.selectedClient)||void 0===m?void 0:m.companyName)||e.clientCompany||"",search:a.search||""})}),(0,H.jsx)(A.A,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.company||""}),(0,H.jsx)(A.A,{children:(0,H.jsx)(P.A,{compact:!0,statuses:e.status||{}})}),(0,H.jsx)(f.A,{title:(0,E.M)(e.updatedAt),children:(0,H.jsx)(A.A,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:k(new Date(e.updatedAt),new Date)?(0,H.jsx)("span",{style:{color:"green",fontWeight:"bold"},children:`${r("Today")} ${(0,E.M)(e.updatedAt,"hours")}`}):(0,E.M)(e.updatedAt,"short_time")})}),(0,H.jsx)(A.A,{children:(0,H.jsxs)(u.A,{display:"flex",justifyContent:"space-between",children:[(0,H.jsx)(f.A,{title:r("Preview"),children:(0,H.jsx)(w.A,{onClick:()=>W(e.hash),size:"small",children:(0,H.jsx)(h.A,{})})}),(0,H.jsx)(f.A,{title:r("OpenDocument"),children:(0,H.jsx)(w.A,{onClick:()=>J(e.hash),size:"small",children:(0,H.jsx)(c.A,{})})}),(0,H.jsx)(f.A,{title:r("DeleteDocument"),children:(0,H.jsx)(w.A,{onClick:()=>U(e.id||e._id),size:"small",color:"error",children:(0,H.jsx)(d.A,{})})})]})})]},e.id||e._id)}))})]}),(0,H.jsx)(y.A,{rowsPerPageOptions:[5,10,25],component:"div",count:q.length,rowsPerPage:F,page:S,onPageChange:(e,t)=>{$(t)},onRowsPerPageChange:e=>{T(parseInt(e.target.value,10)),$(0)},sx:{borderTop:"1px solid rgba(224, 224, 224, 1)",mt:1}})]})};var F=a(4341),T=a(690),_=a(8725),N=a(3505),O=a(7206),V=a(1786);const q=()=>{const{t:e}=(0,M.Bd)(),{getAllDocuments:t,allDocumentsData:a,loading:s,error:d,deleteDocuments:c}=(0,r.u)(),{showMessage:h}=(0,i.J)(),[u,x]=(0,n.useState)({search:"",company:"all",dateRange:[(0,_.GP)(new Date((new Date).setDate((new Date).getDate()-30)),"yyyy-MM-dd"),(0,_.GP)(new Date,"yyyy-MM-dd")]}),p=(0,T.U1)();(0,n.useEffect)((()=>{(async()=>{try{await t()}catch(d){console.error("Error fetching documents:",d),h("Failed to load documents","error")}})()}),[t,h]);const m=(e,t)=>{x((a=>({...a,[e]:t})))};return s?(0,H.jsx)(O.A,{}):d?(0,H.jsxs)(l.A,{maxWidth:"sm",sx:{mt:4,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,H.jsx)(o.A,{variant:"h4",gutterBottom:!0,color:"error",children:e("ErrorLoadingDocuments")}),(0,H.jsx)(o.A,{variant:"subtitle1",children:e("ErrorLoadingDocumentsMessage")})]}):(0,H.jsx)(N.Rl,{children:(0,H.jsxs)(l.A,{maxWidth:"lg",children:[(0,H.jsx)(V.A,{title:e("DocumentsListPageTitle"),description:e("DocumentsListPageDescription"),margin:"0"}),(0,H.jsx)(F.A,{filters:u,filtersConfig:p,onFilterChange:m}),(0,H.jsx)($,{documents:a||[],filters:u,onFilterChange:m,onDeleteDocument:async e=>{try{const t=await c(e);t.message&&h(t.message,"success")}catch(d){console.error("Error deleting document:",d)}finally{t()}}})]})})}},4914:(e,t,a)=>{var n=a(4994);t.A=void 0;var l=n(a(39)),o=a(579);t.A=(0,l.default)((0,o.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy")},6485:(e,t,a)=>{var n=a(4994);t.A=void 0;var l=n(a(39)),o=a(579);t.A=(0,l.default)((0,o.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"OpenInNew")},7260:(e,t,a)=>{var n=a(4994);t.A=void 0;var l=n(a(39)),o=a(579);t.A=(0,l.default)((0,o.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},8354:(e,t,a)=>{a.d(t,{A:()=>o});a(5043);var n=a(9662),l=a(579);const o=(0,n.A)((0,l.jsx)("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage")},7884:(e,t,a)=>{a.d(t,{A:()=>o});a(5043);var n=a(9662),l=a(579);const o=(0,n.A)((0,l.jsx)("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage")}}]);
//# sourceMappingURL=821.19206a4a.chunk.js.map